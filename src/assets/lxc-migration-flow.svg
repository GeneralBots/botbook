<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="600" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <style>
    .title-text { fill: #1E1B4B; font-family: sans-serif; font-size: 24px; font-weight: bold; }
    .main-text { fill: #334155; font-family: sans-serif; font-size: 14px; }
    .label-text { fill: #64748B; font-family: sans-serif; font-size: 12px; }
    .box-bg { fill: #F1F5F9; stroke: #94A3B8; stroke-width: 2; }
    .success-bg { fill: #DCFCE7; stroke: #22C55E; stroke-width: 2; }
    .warning-bg { fill: #FEF3C7; stroke: #F59E0B; stroke-width: 2; }
    .arrow { stroke: #64748B; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }

    @media (prefers-color-scheme: dark) {
      .title-text { fill: #F1F5F9; }
      .main-text { fill: #E2E8F0; }
      .label-text { fill: #94A3B8; }
      .box-bg { fill: #334155; stroke: #64748B; }
      .success-bg { fill: #166534; stroke: #22C55E; }
      .warning-bg { fill: #92400E; stroke: #F59E0B; }
      .arrow { stroke: #94A3B8; }
    }
  </style>

  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748B" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="400" y="40" text-anchor="middle" class="title-text">LXC Migration Flow</text>

  <!-- Step 1: Verify LXC Containers -->
  <rect x="50" y="80" width="200" height="80" rx="8" class="box-bg" />
  <text x="150" y="110" text-anchor="middle" class="main-text" font-weight="bold">1. Verify LXC Containers</text>
  <text x="150" y="130" text-anchor="middle" class="label-text">Check all services running</text>
  <text x="150" y="145" text-anchor="middle" class="label-text">lxc list</text>

  <!-- Step 2: Backup Vault -->
  <rect x="300" y="80" width="200" height="80" rx="8" class="warning-bg" />
  <text x="400" y="110" text-anchor="middle" class="main-text" font-weight="bold">2. Backup Vault</text>
  <text x="400" y="130" text-anchor="middle" class="label-text">CRITICAL: Save init.json</text>
  <text x="400" y="145" text-anchor="middle" class="label-text">vault operator raft snapshot</text>

  <!-- Step 3: Install Vault -->
  <rect x="550" y="80" width="200" height="80" rx="8" class="box-bg" />
  <text x="650" y="110" text-anchor="middle" class="main-text" font-weight="bold">3. Install Vault</text>
  <text x="650" y="130" text-anchor="middle" class="label-text">--container flag</text>
  <text x="650" y="145" text-anchor="middle" class="label-text">Generates .env file</text>

  <!-- Step 4: Verify Connection -->
  <rect x="50" y="220" width="200" height="80" rx="8" class="box-bg" />
  <text x="150" y="250" text-anchor="middle" class="main-text" font-weight="bold">4. Verify Connection</text>
  <text x="150" y="270" text-anchor="middle" class="label-text">Test Vault access</text>
  <text x="150" y="285" text-anchor="middle" class="label-text">./botserver status vault</text>

  <!-- Step 5: Start BotServer -->
  <rect x="300" y="220" width="200" height="80" rx="8" class="success-bg" />
  <text x="400" y="250" text-anchor="middle" class="main-text" font-weight="bold">5. Start BotServer</text>
  <text x="400" y="270" text-anchor="middle" class="label-text">Connect to LXC stack</text>
  <text x="400" y="285" text-anchor="middle" class="label-text">./botserver start --container</text>

  <!-- Step 6: Verify Services -->
  <rect x="550" y="220" width="200" height="80" rx="8" class="box-bg" />
  <text x="650" y="250" text-anchor="middle" class="main-text" font-weight="bold">6. Verify Services</text>
  <text x="650" y="270" text-anchor="middle" class="label-text">Check all connections</text>
  <text x="650" y="285" text-anchor="middle" class="label-text">./botserver status</text>

  <!-- Warning Box -->
  <rect x="50" y="360" width="700" height="100" rx="8" class="warning-bg" />
  <text x="400" y="390" text-anchor="middle" class="main-text" font-weight="bold" font-size="16px">⚠️ CRITICAL WARNING</text>
  <text x="400" y="415" text-anchor="middle" class="main-text">Vault init.json and unseal keys are REQUIRED for recovery</text>
  <text x="400" y="435" text-anchor="middle" class="main-text">If lost, all secrets are unrecoverable and services must be reinitialized</text>
  <text x="400" y="455" text-anchor="middle" class="label-text">Store backups in secure, off-site location</text>

  <!-- Arrows -->
  <line x1="250" y1="120" x2="300" y2="120" class="arrow" />
  <line x1="500" y1="120" x2="550" y2="120" class="arrow" />
  <line x1="650" y1="160" x2="650" y2="220" class="arrow" />
  <line x1="650" y1="260" x2="550" y2="260" class="arrow" />
  <line x1="500" y1="260" x2="250" y2="260" class="arrow" />
  <line x1="150" y1="300" x2="150" y2="360" class="arrow" />
</svg>
